<article class="card-shell">
  <div class="exercise-head">
    <span class="pill">Signal {{ exercise().id }}</span>
    <div class="title-block">
      <p class="label">Cible</p>
      <p class="code">{{ exercise().target }}</p>
      <h2>{{ exercise().title }}</h2>
    </div>
  </div>

  <p class="goal">{{ exercise().goal }}</p>

  <div class="operators">
    @for (concept of exercise().concepts; track concept) {
      <span
        class="chip"
        [attr.data-hint]="getHint(concept) || null"
        [attr.title]="getHint(concept) || null"
      >
        {{ concept }}
      </span>
    }
  </div>

  <div class="steps">
    <p class="label">Checklist</p>
    <ul>
      @for (step of exercise().steps; track step) {
        <li>{{ step }}</li>
      }
    </ul>
  </div>

  @if (exercise().expected) {
    <p class="expected">{{ exercise().expected }}</p>
  }

  @if (exercise().fileHint) {
    <p class="hint">Fichier cible : <code>{{ exercise().fileHint }}</code></p>
  }

  @if (exercise().preview) {
    <div class="preview">
      <button class="ghost" type="button" (click)="runPreview()" [disabled]="running()">
        Preview
      </button>
      <span class="inline-hint">
        fenetre de {{ exercise().previewTimeoutMs ?? 4000 }} ms
      </span>
    </div>
  }

  @if (logs().length) {
    <div class="log">
      @for (log of logs(); track $index) {
        <div class="log-line">{{ log }}</div>
      }
    </div>
  }

  <a class="detail-link" [routerLink]="exercise().route">Ouvrir l exercice</a>
</article>
